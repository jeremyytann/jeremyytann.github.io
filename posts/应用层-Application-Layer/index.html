<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="计算机网络 2 — 物理层" /><meta property="og:locale" content="en" /><meta name="description" content="2.1 物理层的基本概念" /><meta property="og:description" content="2.1 物理层的基本概念" /><link rel="canonical" href="http://localhost:4000/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-2-%E7%89%A9%E7%90%86%E5%B1%82/" /><meta property="og:url" content="http://localhost:4000/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-2-%E7%89%A9%E7%90%86%E5%B1%82/" /><meta property="og:site_name" content="Jeremy’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-03-05T13:01:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="计算机网络 2 — 物理层" /><meta name="twitter:site" content="@tanchiachun" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-03-05T13:01:00+08:00","datePublished":"2022-03-05T13:01:00+08:00","description":"2.1 物理层的基本概念","headline":"计算机网络 2 — 物理层","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-2-%E7%89%A9%E7%90%86%E5%B1%82/"},"url":"http://localhost:4000/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-2-%E7%89%A9%E7%90%86%E5%B1%82/"}</script><title>应用层 Application Layer | Jeremy's Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Jeremy's Blog"><meta name="application-name" content="Jeremy's Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/avatar/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Jeremy's Blog</a></div><div class="site-subtitle font-italic">My Study Diary</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/jeremyytann" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/tanchiachun" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['tanchiachun2014','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>应用层 Application Layer</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4 pb-5"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>应用层 Application Layer</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1652357160" data-df="ll" data-toggle="tooltip" data-placement="bottom"> May 12, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/tanchiachun">Tan Chia Chun</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3927 words"> <em>21 min</em> read</span></div></div></div><div class="post-content"><p>应用层协议是<strong>为了解决某一类应用的问题</strong>。由于网络应用的多样性，应用层的协议也种类繁多。</p><p>应用层的许多协议都是<strong>基于客户/服务器方式</strong>，其<strong>描述的是进程之间服务和被服务的关系</strong>。客户 (client) 和服务器 (server) 都是<strong>指通信中所涉及的两个应用进程</strong>。</p><p>这里主要的特征是：<strong>客户是服务请求方，而服务器则是服务提供方</strong>。</p><h2 id="套接字编程接口"><span class="mr-2"><strong>套接字编程接口</strong></span><a href="#套接字编程接口" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>套接字 (socket) 是<strong>最常用的应用层编程接口</strong>。网络子系统作为操作系统的一部分，以应用编程接口 (Application Programming Interface, API) 的形式向应用程序提供调用接口。</p><p><strong>经典的 socket 编程接口采用同步调用方式</strong>，又称<strong>阻塞式</strong>。这是因为<strong>调用 recv() 时，调用进程将被阻塞，直到收到数据为止</strong>。</p><p>而 Windows 这类基于事件驱动的系统中，<strong>程序的执行由事件驱动，需要异步事件驱动方式的套接字编程接口</strong>。因此 <strong>Microsoft 推出了 WinSock 编程接口</strong>，在阻塞式调用基础上，<strong>增加了异步调用方式</strong>。在阻塞式调用模式上，WinSock 与经典的 socket 兼容。</p><h3 id="常见的-socket-接口函数"><span class="mr-2"><strong>常见的 socket 接口函数</strong></span><a href="#常见的-socket-接口函数" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><code class="language-plaintext highlighter-rouge">创建一个socket</code></p><p>SOCKET socket ( int af, int type, int protocol )</p><p><code class="language-plaintext highlighter-rouge">将本地地址与 socket 绑定</code></p><p>int bind ( SOCKET s, struct sockaddr *name, int namelen )</p><p><code class="language-plaintext highlighter-rouge">在套接字上舰艇连接请求</code></p><p>int listen ( SOCKET s, int backlog )</p><p><code class="language-plaintext highlighter-rouge">与 name 指定的地址建立连接</code></p><p>int conect ( SOCKET s, struct sockaddr *name, int namelen )</p><p><code class="language-plaintext highlighter-rouge">接受与本 socket 的连接请求</code></p><p>SOCKET accept ( SOCKET s, struct sockaddr *addr, int *addrlen )</p><p><code class="language-plaintext highlighter-rouge">在连接的 socket 上发送数据</code></p><p>int send ( SOCKET s, char* buf, int len, int flags )</p><p><code class="language-plaintext highlighter-rouge">在连接的活绑定的 socket 上接收数据</code></p><p>int recv ( SOCKET s, char* buf, int len, int flags )</p><p><code class="language-plaintext highlighter-rouge">向指定的目标地址发送数据</code></p><p>int sendto ( SOCKET s, char* buf, int len, int flags, struct sockaddr *to, int tolen )</p><p><code class="language-plaintext highlighter-rouge">在 socket 上接收数据并记录源地址</code></p><p>int recvfrom ( SOCKET s, char* buf, int len, int flags, struct sockaddr *from, int* fromlen )</p><h2 id="域名系统-dns"><span class="mr-2"><strong>域名系统 DNS</strong></span><a href="#域名系统-dns" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>域名系统 (Domain Name System, DNS) 是 <strong>Internet 使用的命名系统</strong>。其<strong>基于 UDP 协议</strong>实现。</p><p>当<strong>应用程序需要进行域名解析</strong>时，<strong>调用域名解析程序 (resolver)</strong>，即<strong>成为 DNS 的一个客户</strong>。</p><p>该<strong>程序会向本地域名服务器发送域名解析请求</strong> (UDP 报文)，其中<strong>包含待解析的域名</strong>。</p><p><strong>本地域名服务器在查找域名后</strong>，会<strong>返回应答报文</strong>，其中<strong>包含对应的 IP 地址</strong>。</p><h3 id="internet-的域名结构"><span class="mr-2"><strong>Internet 的域名结构</strong></span><a href="#internet-的域名结构" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Internet <strong>采用层次结构的命名树作为主机的名字</strong>，并<strong>使用分布式的域名系统 DNS</strong>。</p><p>域名<strong>不区分大小写</strong>，且<strong>长度不超过 255 字符</strong>。其层次树状结构的命名方法为：</p><p>… . 三级域名 . 二级域名 . 顶级域名。</p><p><code class="language-plaintext highlighter-rouge">顶级域名 (Top Level Domain, TLD)</code></p><p>顶级域名可分为<strong>国家顶级域名以及通用顶级域名</strong>。</p><p><strong>国家顶级域名</strong>，如 .cn 表示中国、.us 表示美国、.uk 表示英国等。</p><p><strong>通用顶级域名</strong>，如 .com 表示公司和企业、.net 表示网络服务机构、.org 表示非盈利性组织以及 .edu 表示教育机构等。</p><h3 id="域名服务器"><span class="mr-2"><strong>域名服务器</strong></span><a href="#域名服务器" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>多个<strong>域名服务器</strong>上运行<strong>专门的域名服务器程序</strong>，以<strong>完成域名到 IP 地址的解析</strong> (resolve)。</p><p>域名服务器<strong>会定期把数据复制到几个域名服务器来保存</strong>，其中一个是主域名服务器，其他的则是辅助域名服务器。</p><p>域名服务器分为四类：</p><p><code class="language-plaintext highlighter-rouge">根域名服务器</code></p><p><strong>根域名服务器知道所有的顶级域名服务器的域名和 IP 地址</strong>。</p><p>当<strong>本地域名服务器无法解析域名</strong>时，就<strong>会求助于根域名服务器</strong>。</p><p><code class="language-plaintext highlighter-rouge">顶级域名服务器</code></p><p>负责<strong>管理在该顶级域名服务器注册的所有二级域名</strong>。</p><p><code class="language-plaintext highlighter-rouge">权限域名服务器</code></p><p>负责<strong>一个区 (zone) 的域名服务器</strong>。</p><p><code class="language-plaintext highlighter-rouge">本地域名服务器</code></p><p>也称为<strong>默认域名服务器</strong>。</p><h3 id="域名解析过程"><span class="mr-2"><strong>域名解析过程</strong></span><a href="#域名解析过程" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>域名服务器的监听端口号为 53</strong>。<strong>为了提高域名查询的效率</strong>，域名服务器上<strong>通常会设置高速缓存</strong>。</p><p><strong>主机向本地域名服务器</strong>的查询一般<strong>采用递归查询</strong>。如果本地域名服务器不知道被查询域名的 IP 地址，就会以 DNS 客户的身份，向根域名服务器继续发出查询请求报文。</p><blockquote><p>递归查询是一个接一个往下问，查询到后再一个接一个返回结果。</p></blockquote><p><strong>本地域名服务器向根域名服务器</strong>的查询通常是<strong>采用迭代查询</strong>。当根域名服务器收到本地域名服务器的迭代查询请求报文时，要不就给出所要查询的 IP 地址，否则就告诉本地域名服务器下一步应该向哪一个域名服务器查询，让本地域名服务器进行后续的查询。</p><blockquote><p>迭代查询是一个服务器对多个服务器进行轮询。</p></blockquote><h2 id="文件传送协议"><span class="mr-2"><strong>文件传送协议</strong></span><a href="#文件传送协议" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>文件传送协议 (File Transfer Protocol, FTP) <strong>使用客户/服务器方式</strong>，<strong>一个 FTP 服务器进程可以同时为多个客户进程提供服务</strong>。</p><p>FTP 的服务器进程<strong>由两大部分组成</strong>，一个<strong>负责接收新请求的主进程</strong>以及若干个<strong>负责处理单个请求的从属进程</strong>。</p><h3 id="主进程的工作步骤"><span class="mr-2"><strong>主进程的工作步骤</strong></span><a href="#主进程的工作步骤" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>打开熟知端口 (端口号为 21)，使客户进程能连接上<li>等待客户进程发出连接请求<li>启动从属进程处理客户进程发来的请求。从属进程在处理完客户进程的请求后就会终止，运行期间还可能会根据需要创建其他子进程<li>回到等待状态，继续接收其他客户进程发来的请求<li>主进程与从属进程的处理是并发进行的</ul><h3 id="tcp-连接"><span class="mr-2"><strong>TCP 连接</strong></span><a href="#tcp-连接" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>FTP <strong>使用 2 个 TCP 连接</strong>，<strong>控制连接和数据连接</strong></p><p><code class="language-plaintext highlighter-rouge">控制连接</code></p><p><strong>控制连接会在整个会话期间一直保持打开</strong>。</p><p>FTP 客户发出的传送请求通过控制连接发送给服务器端的控制进程，但<strong>控制连接不用来传送文件</strong>。</p><p><code class="language-plaintext highlighter-rouge">数据连接</code></p><p><strong>收到 FTP 客户发送来的文件传输请求后</strong>，服务器端的控制进程<strong>创建数据传送进程和数据连接</strong>。</p><p>数据传送进程实际完成文件的传送，<strong>传送完毕后关闭数据传送链接，并结束运行</strong>。</p><h2 id="万维网-www"><span class="mr-2"><strong>万维网 WWW</strong></span><a href="#万维网-www" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>WWW 为 World Wide Web 的缩写，是<strong>分布式超媒体 (hypermedia) 系统</strong>，它是<strong>超文本 (hypertext) 系统的扩充。</strong></p><h3 id="统一资源定位符-url"><span class="mr-2"><strong>统一资源定位符 URL</strong></span><a href="#统一资源定位符-url" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>URL 的全称为 Uniform Resource Locator，是<strong>对 Internet 上资源位置和访问方法的一种简洁表示</strong>，用以<strong>标识分布在整个因特网上的万维网文档</strong>。</p><p>URL<strong>不区分大小写</strong>，其一般形式为：协议://主机:端口/路径。</p><p><code class="language-plaintext highlighter-rouge">主机</code></p><p>存放资源的主机在 Internet 中的域名</p><p><code class="language-plaintext highlighter-rouge">端口 和 路径</code></p><p>有时可省略。使用 <strong>http 协议</strong>时，<strong>省略端口将使用熟知端口号 80</strong>，<strong>省略路径F则指向主页 (home page)</strong>。</p><h3 id="超文本传输协议-http"><span class="mr-2"><strong>超文本传输协议 HTTP</strong></span><a href="#超文本传输协议-http" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>HTTP 的全称为 HyperText Transfer Protocol，其<strong>基于 TCP 协议</strong>，是<strong>万维网上可靠地交换文件的重要基础</strong>，用以<strong>实现万维网上各种超链的链接</strong>。</p><p>HTTP 是<strong>面向事务的客户/服务器协议</strong>，是<strong>无状态</strong>的，即<strong>服务器不记录客户端的访问状态</strong>。</p><p><strong>其基本工作原理</strong>为：</p><ul><li>Web 服务的<strong>熟知端口号为 80</strong>，服务器通常<strong>在该端口上监听</strong>。<li>客户端<strong>需要请求某个页面</strong>时，<strong>与服务器建立 TCP 连接</strong>。<li>之后<strong>请求传送文件</strong>，并<strong>进行文件的传送</strong>。<li><strong>传送完毕后释放 TCP 连接</strong>。</ul><p><code class="language-plaintext highlighter-rouge">报文类型</code></p><p>HTTP 的报文类型可<strong>分为请求报文以及响应报文</strong>。<strong>请求报文是从客户向服务器发送请求报文</strong>，而<strong>响应报文则是从服务器到客户的回答</strong>。由于 HTTP 是面向正文的 (text-oriented)，报文中的字段都是 ASCII 码串，因此每个字段的长度都是不确定的。</p><p>HTTP <strong>应答报文的开始行是状态行</strong>，其<strong>包括三项内容：HTTP 的版本、状态码以及解释状态码的简单短语</strong>。</p><p><code class="language-plaintext highlighter-rouge">HTTP/1.0</code></p><p>HTTP/1.0 请求一个万维网文档所需的步骤与时间：</p><ul><li>首先<strong>建立 TCP 连接，需 3 次握手</strong>。<li>在 2 次握手后，第 3 次握手报文的数据部分可传送 HTTP 请求报文。</ul><p>因此<strong>请求文档所需时间</strong>为：文档传输时间 + 2 倍 RTT 时间。</p><p>由于<strong>每传送一个文件都需要建立一次 TCP 连接</strong>，而<strong>一个 Web 页面常常包含数量众多的文件</strong>，<strong>导致效率过低</strong>。 因此有了 HTTP/1.1 的改进。</p><p><code class="language-plaintext highlighter-rouge">HTTP/1.1</code></p><p>HTTP/1.1 协议<strong>使用持续连接 (persistent connection)</strong>。</p><p>服务器<strong>发送响应后，会在一段时间内保持连接</strong>，使客户与服务器<strong>可以继续传送后续的 HTTP 请求报文和响应报文</strong>。这并<strong>不局限于传送同一个页面上链接的文档</strong>，而是<strong>只要这些文档都在同一个服务器上即可</strong>。</p><p>目前主流的浏览器都默认支持 HTTP/1.1。</p><h3 id="超文本标记语言-html"><span class="mr-2"><strong>超文本标记语言 HTML</strong></span><a href="#超文本标记语言-html" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>HTML 的全称为 HyperText Markup Language，<strong>用以存储和表示万维网文档</strong>。</p><p>RFC 1866 为 HyperText Markup Language - 2.0。</p><p>HTML 定义了许多用于排版的命令，即标签 (tag)。</p><p>HTML 把各种标签嵌入到万维网的页面中，构成 HTML 文档。浏览器从服务器读取 HTML 文档后，按照其中嵌入的各种标签，根据显示器尺寸和分辨率显示页面。</p><blockquote><p>仅当 HTML 文档是以 html 或 htm 为后缀时，浏览器才会对此文档的各种标签进行解释</p></blockquote><h3 id="安全的-http-协议https"><span class="mr-2"><strong>安全的 HTTP 协议：HTTPS</strong></span><a href="#安全的-http-协议https" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>HTTPS 是<strong>安全的 HTTP 协议</strong>，其<strong>建立在 SSL 基础上</strong>。其<strong>熟知端口号为 443</strong>，而不是 80。</p><p><strong>SSL</strong> 的全称为 Secure Socket Layer，<strong>为 TCP 协议提供信息加密和完整性</strong>。</p><p>NetScape 于 1994 年开发，1996 年发布 SSL 3.0，1999 年 IETF 在 SSL 3.0 的基础上推出了 TLS (Transport Layer Security)。</p><p><strong>SSL/TLS 已被浏览器广泛支持</strong>，很多 <strong>Web 应用利用 HTTPS 协议实现安全传输</strong>。</p><p><strong>SSL会话的建立过程</strong>如下：</p><ul><li>浏览器 A 将其支持的加密算法告知服务器 B<li>服务器 B 将自己所支持的加密算法与浏览器所支持的加密算法进行交集，再选定一种加密算法<li>服务器 B 以数字证书的方式将自己的公钥传送给浏览器 A<li>浏览器 A 鉴别服务器 B 的证书后，从中取得公钥<li>浏览器 A 产生秘密数，并使用此秘密数产生会话密钥。随后将密钥发送给服务器 B<li>服务器 B 也使用此秘密数产生会话密钥。<li>到此完成 SSL 会话建立，使用会话密钥加密，开始数据传输</ul><h2 id="电子邮件"><span class="mr-2"><strong>电子邮件</strong></span><a href="#电子邮件" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>电子邮件系统的<strong>两种实体为用户代理以及邮件服务器</strong>。</p><p><code class="language-plaintext highlighter-rouge">用户代理 (User Agent, UA)</code></p><p>用户代理是<strong>用户与电子邮件系统的接口</strong>，即电子邮件客户端软件。</p><p>其<strong>功能</strong>有撰写、显示、处理和通信。</p><p><code class="language-plaintext highlighter-rouge">邮件服务器</code></p><p>邮件服务器<strong>用于发送和接收邮件</strong>，并<strong>向发送人报告传送信息</strong>，如已交付、被拒绝或丢失等。</p><p>邮件服务器<strong>按照客户/服务器方式工作</strong>，即一个邮件服务器可以作为客户，也可以作为服务器。</p><p>邮件服务器<strong>发送邮件使用 SMTP 协议</strong>，而客户端<strong>读取邮件则使用 POP3 协议</strong>。</p><h3 id="简单邮件传送协议-smtp"><span class="mr-2"><strong>简单邮件传送协议 SMTP</strong></span><a href="#简单邮件传送协议-smtp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>SMTP 为<strong>发送邮件的协议</strong>，其全称为 Simple Mail Transfer Protocol。</p><p>RFC 2821 (前为 RFC 821)：Simple Mail Transfer Protocol</p><p>SMTP <strong>规定了两个相互通信的 SMTP 进程之间应该如何交换信息</strong>。</p><p>SMTP 使用<strong>客户/服务器的方式工作</strong>，负责<strong>发送邮件的 SMTP 进程为 SMTP 客户</strong>，而负责<strong>接收邮件的 SMTP 进程为 STMP 服务器</strong>。</p><p>SMTP 定义了 <strong>14 条命令和 21 种应答信息</strong>。每条命令用 4 个字母组成，而每一种应答信息则一般只有一行信息，由一个 3 位数字的代码开始，后面可视情况附上简单的文字说明。</p><p><strong>SMTP 通信的三个阶段</strong>为<strong>连接建立、邮件传送以及连接释放</strong>。</p><p><code class="language-plaintext highlighter-rouge">连接建立</code></p><p>连接在发送主机的 SMTP 客户和接收主机的 SMTP 服务器之间建立，不使用中间邮件服务器。</p><p><code class="language-plaintext highlighter-rouge">连接释放</code></p><p>邮件发送完毕后，SMTP 释放 TCP 连接。</p><h3 id="电子邮件的信息格式"><span class="mr-2"><strong>电子邮件的信息格式</strong></span><a href="#电子邮件的信息格式" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>RFC 2822 (前为 RFC 822)：Internet Message Format</p><p>一个电子邮件<strong>分为信封和内容两大部分</strong>。</p><p>RFC 822 <strong>只规定了邮件内容中的首部格式</strong>，而邮体的主体部分则由用户自由撰写。</p><p><strong>首部中的主要字段</strong>如下：</p><ul><li>To：后面填入一个或多个收件人的 e-mail 地址<li>Subject：邮件的主题，反映了邮件的主要内容<li>Cc：抄送，表示给某人发送一个邮体副本<li>From：发信人的电子邮件地址<li>Date：发信日期<li>Reply-to：对方回信地址</ul><h3 id="mime"><span class="mr-2"><strong>MIME</strong></span><a href="#mime" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>早期的邮件仅支持 7bit ASCII 编码，导致传送非英语信息时存在困难。因此 1993 年提出了 MIME 标准。</p><p>MIME 的全称为 Multi-purpose Internet Mail Extension。</p><p>MIME 标准<strong>通过在邮件首部中说明数据类型</strong>，如文本、声音、图像、视像等，<strong>可在邮件传送多种类型的数据</strong>。</p><p><strong>读取邮件的协议</strong>为 <strong>Post Office Protocol, POP3 和 Internet Message Access Protocol, IMAP</strong>。</p><p><strong>MIME 的思路</strong>如下：</p><ul><li>继续使用目前的 RFC 822 格式<li>对二进制数据进行编码，将其转换为 7 位 ASCII 码<li>邮件首部中增加字段，定义数据类型和编码规则</ul><p><strong>MIME 新增的 5 种头部字段</strong>如下：</p><ul><li>MIME-Version：MIME 版本号，一般为 1.0<li>Content-Type：报文体中数据的类型<li>Content-Transfer-Encoding：传输时编码格式<li>Content-ID：唯一的标识符<li>Content-Description：供人阅读的内容描述</ul><p><strong>传统的编码规则</strong>有：</p><ul><li><strong>base64</strong>：又称为基数 64 转换 (Radix-64)，原始二进制数据中的每 6bit 被映射为 8bit，即 ASCII 字符。<li><strong>quoted-printable</strong>：原始二进制数据的 8bit 表示为 2 个 16 进制数，并前加 = 符号。</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/notes/'>Notes</a>, <a href='/categories/computer-network/'>Computer Network</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/computer-network/" class="post-tag no-text-decoration" >Computer Network</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%E5%BA%94%E7%94%A8%E5%B1%82+Application+Layer+-+Jeremy%27s+Blog&url=https%3A%2F%2Fjeremyytann.github.io%2Fposts%2F%25E5%25BA%2594%25E7%2594%25A8%25E5%25B1%2582-Application-Layer%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%E5%BA%94%E7%94%A8%E5%B1%82+Application+Layer+-+Jeremy%27s+Blog&u=https%3A%2F%2Fjeremyytann.github.io%2Fposts%2F%25E5%25BA%2594%25E7%2594%25A8%25E5%25B1%2582-Application-Layer%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fjeremyytann.github.io%2Fposts%2F%25E5%25BA%2594%25E7%2594%25A8%25E5%25B1%2582-Application-Layer%2F&text=%E5%BA%94%E7%94%A8%E5%B1%82+Application+Layer+-+Jeremy%27s+Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Advanced-Dart/">Advanced Dart</a><li><a href="/posts/Basics-Of-Dart/">Basics of Dart</a><li><a href="/posts/UML-Class-Diagram/">UML Class Diagram</a><li><a href="/posts/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F-Selection-Sort/">选择排序 Selection Sort</a><li><a href="/posts/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F-Merge-Sort/">归并排序 Merge Sort</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/blender/">Blender</a> <a class="post-tag" href="/tags/computer-network/">Computer Network</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/sorting/">Sorting</a> <a class="post-tag" href="/tags/object-oriented-programming/">Object-Oriented Programming</a> <a class="post-tag" href="/tags/dart/">Dart</a> <a class="post-tag" href="/tags/mvc/">MVC</a> <a class="post-tag" href="/tags/operating-system/">Operating System</a> <a class="post-tag" href="/tags/software-architecture/">Software Architecture</a> <a class="post-tag" href="/tags/uml/">UML</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/"><div class="card-body"> <em class="small" data-ts="1646203860" data-df="ll" > Mar 2, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>计算机网络概述</h3><div class="text-muted small"><p> 计算机网络的定义 计算机网络是一些互相连接的、自治（一个计算机网络连接多台计算机，但各自独立工作）的计算机的集合。其功能主要体现在连通性、资源共享。 计算机网络与分布式系统 分布式系统是建立在网络之上的软件系统。在分布式系统中，一组独立的计算机协同完成一个工作，展现给用户的是一个统一的整体，就像一个系统一样。而计算机网络则没有这种统一性。 计算机网络的分类 计算机网络的...</p></div></div></a></div><div class="card"> <a href="/posts/%E7%89%A9%E7%90%86%E5%B1%82-Physical-Layer/"><div class="card-body"> <em class="small" data-ts="1646456460" data-df="ll" > Mar 5, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>物理层 Physical Layer</h3><div class="text-muted small"><p> 物理层的基本概念 物理层主要任务为确定与传输媒体的接口有关的一些特性，像是： 机械特性 — 接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置等 电气特性 — 接口电缆的各条线上出现的电压的范围 功能特性 — 某条线上出现的某一电平的电压的意义 过程特性 — 对于不同功能的各种可能事件的出现顺序 数据通信的基础知识 信道 (Channel) 一般表示向某一方向传...</p></div></div></a></div><div class="card"> <a href="/posts/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82-Data-Link-Layer/"><div class="card-body"> <em class="small" data-ts="1647511200" data-df="ll" > Mar 17, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>数据链路层 Data Link Layer</h3><div class="text-muted small"><p> 数据链路层设计要点 数据链路层属于计算机网络的底层。 物理层实现了比特流的传输，数据链路层在其基础上实现了帧 (frame) 的传输。 数据链路层传输的协议数据单元 (Protocol Data Unit, PDU) 是帧。数据链路层把网络层交下来的数据构成帧发送到链路上，以及把接收到的帧中的数据取出并上交给网络层。 数据链路层使用的信道类型 点对点信道 这种信道使用一对一的...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%E4%BC%A0%E8%BE%93%E5%B1%82-Transport-Layer/" class="btn btn-outline-primary" prompt="Older"><p>传输层 Transport Layer</p></a> <a href="/posts/IPv6-%E5%8D%8F%E8%AE%AE/" class="btn btn-outline-primary" prompt="Newer"><p>IPv6 协议</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "jeremyytann/jeremyytann.github.io", "data-repo-id": "R_kgDOG65--w", "data-category": "General", "data-category-id": "DIC_kwDOG65--84CN6so", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/tanchiachun">Tan Chia Chun</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/blender/">Blender</a> <a class="post-tag" href="/tags/computer-network/">Computer Network</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/sorting/">Sorting</a> <a class="post-tag" href="/tags/object-oriented-programming/">Object-Oriented Programming</a> <a class="post-tag" href="/tags/dart/">Dart</a> <a class="post-tag" href="/tags/mvc/">MVC</a> <a class="post-tag" href="/tags/operating-system/">Operating System</a> <a class="post-tag" href="/tags/software-architecture/">Software Architecture</a> <a class="post-tag" href="/tags/uml/">UML</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-7W4M2E46LD"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-7W4M2E46LD'); }); </script>
