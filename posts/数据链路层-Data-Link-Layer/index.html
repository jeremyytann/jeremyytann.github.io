<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="计算机网络 2 — 物理层" /><meta property="og:locale" content="en" /><meta name="description" content="2.1 物理层的基本概念" /><meta property="og:description" content="2.1 物理层的基本概念" /><link rel="canonical" href="http://localhost:4000/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-2-%E7%89%A9%E7%90%86%E5%B1%82/" /><meta property="og:url" content="http://localhost:4000/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-2-%E7%89%A9%E7%90%86%E5%B1%82/" /><meta property="og:site_name" content="Jeremy’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-03-05T13:01:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="计算机网络 2 — 物理层" /><meta name="twitter:site" content="@tanchiachun" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-03-05T13:01:00+08:00","datePublished":"2022-03-05T13:01:00+08:00","description":"2.1 物理层的基本概念","headline":"计算机网络 2 — 物理层","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-2-%E7%89%A9%E7%90%86%E5%B1%82/"},"url":"http://localhost:4000/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-2-%E7%89%A9%E7%90%86%E5%B1%82/"}</script><title>数据链路层 Data Link Layer | Jeremy's Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Jeremy's Blog"><meta name="application-name" content="Jeremy's Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/avatar/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Jeremy's Blog</a></div><div class="site-subtitle font-italic">My Study Diary</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/jeremyytann" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/tanchiachun" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['tanchiachun2014','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>数据链路层 Data Link Layer</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4 pb-5"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>数据链路层 Data Link Layer</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1647511200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Mar 17, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/tanchiachun">Tan Chia Chun</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="6849 words"> <em>38 min</em> read</span></div></div></div><div class="post-content"><h2 id="数据链路层设计要点"><span class="mr-2"><strong>数据链路层设计要点</strong></span><a href="#数据链路层设计要点" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>数据链路层<strong>属于计算机网络的底层</strong>。</p><p>物理层实现了比特流的传输，数据链路层在其基础上<strong>实现了帧 (frame) 的传输</strong>。</p><p>数据链路层传输的<strong>协议数据单元 (Protocol Data Unit, PDU) 是帧</strong>。<strong>数据链路层把网络层交下来的数据构成帧发送到链路上，以及把接收到的帧中的数据取出并上交给网络层。</strong></p><h3 id="数据链路层使用的信道类型"><span class="mr-2"><strong>数据链路层使用的信道类型</strong></span><a href="#数据链路层使用的信道类型" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><code class="language-plaintext highlighter-rouge">点对点信道</code></p><p>这种信道使用<strong>一对一的点对点通信方式</strong>。</p><p><code class="language-plaintext highlighter-rouge">广播信道</code></p><p>这种信道使用<strong>一对多的广播通信方式</strong>。广播信道上连接多个主机，必须采用专门的共享信道协议来协调数据发送。</p><h3 id="数据链路层涉及的问题"><span class="mr-2"><strong>数据链路层涉及的问题</strong></span><a href="#数据链路层涉及的问题" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><code class="language-plaintext highlighter-rouge">成帧 (framing)</code></p><p>怎么组成帧、怎么使接收方识别帧</p><p><code class="language-plaintext highlighter-rouge">错差控制</code></p><p>帧在传输过程中出错的检测</p><p><code class="language-plaintext highlighter-rouge">流量控制及可靠传输</code></p><p>仅是数据链路层的选项</p><p><code class="language-plaintext highlighter-rouge">广播信道中的介质访问控制</code></p><p>如何使众多用户能够合理且方便地共享通信媒体资源</p><h3 id="成帧方法"><span class="mr-2"><strong>成帧方法</strong></span><a href="#成帧方法" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>主要<strong>解决接收方如何识别帧的边界问题</strong>。常用的成帧方法有：</p><p><code class="language-plaintext highlighter-rouge">字符计数法</code></p><p>在<strong>帧头部字段中指明本帧的字节数</strong>，接收方通过该字段得知该接受多少字节。</p><p><code class="language-plaintext highlighter-rouge">字符填充的首尾定界法</code></p><p><strong>定义专门的字符作为帧的起始/结束标志</strong>，并使用字符填充方式将标志字符与数据区分开来。</p><p><code class="language-plaintext highlighter-rouge">比特填充的首尾定界法</code></p><p><strong>定义专门的比特序列作为帧的起始/结束标志</strong>，并使用比特填充方式将标志序列与数据区分开来。</p><p><code class="language-plaintext highlighter-rouge">物理编码违例法</code></p><p><strong>使用无效的物理编码作为帧的起始/结束标志</strong>，供接收方识别。</p><h2 id="错误检测和纠正"><span class="mr-2"><strong>错误检测和纠正</strong></span><a href="#错误检测和纠正" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>任何通信链路在传输数据时都有可能出错，一般用误码率 (Bit Error Rate, BER) 表示链路可靠性：</p><p><strong>误码率 = 出错的比特数 / 传送的总比特数</strong>。</p><p>当误码率为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>10</mn></mrow></msup></mrow><annotation encoding="application/x-tex">10^{-10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span>，表示平均每传送 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>10</mn></msup></mrow><annotation encoding="application/x-tex">10^{10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span> 个比特就会出现一个比特出错。</p><h3 id="检错编码-error-detecting-code"><span class="mr-2"><strong>检错编码 (Error detecting code)</strong></span><a href="#检错编码-error-detecting-code" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>可检测错误的编码，以重传处理</strong>。</p><p>由于<strong>信道的误码率通常都比较低，出错属于小概率事件</strong>，因此发现出错的时候只需重传即可，使用检错编码就更有性价比。</p><p><strong>常用的检错编码方</strong>法有：</p><p><code class="language-plaintext highlighter-rouge">奇偶校验</code></p><p><code class="language-plaintext highlighter-rouge">简单累加和（校验和）</code></p><p><code class="language-plaintext highlighter-rouge">循环冗余校验 (Cyclic Redundancy Check, CRC)</code></p><p><strong>发送方</strong>：<strong>把数据划分成组，设每组 k 个比特，在其后添加供差错检测用的 n 位冗余码，再将 (k+n) 比特一起发送</strong>。</p><p><strong>接收方</strong>：对<strong>收到的 (k+n) 比特计算冗余码，结果为 0 表示传输正确，否则表示传输错误</strong>。</p><h3 id="纠错编码-error-correcting-code"><span class="mr-2"><strong>纠错编码 (Error correcting code)</strong></span><a href="#纠错编码-error-correcting-code" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>可检测错误，并且纠正错误的编码</strong>。</p><p>这类编码看似很好，但<strong>实际应用的代价比较高</strong>，因为需要为了纠正错误腾出更多冗余比特，成本更高。</p><h2 id="基本数据链路协议"><span class="mr-2"><strong>基本数据链路协议</strong></span><a href="#基本数据链路协议" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>基本数据链路协议有<strong>无限制的单工协议</strong>、<strong>单工停-等协议</strong>以及<strong>有噪声信道的单工协议</strong>。</p><h3 id="无限制的单工协议"><span class="mr-2"><strong>无限制的单工协议</strong></span><a href="#无限制的单工协议" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>其<strong>假设前提</strong>有：</p><blockquote><p>此协议未考虑接收方的处理速度，像是发送方发送的速度大于接收方的处理速度。</p></blockquote><ul><li><strong>单向传输</strong>，即发送方向接收方传输数据，接收方不需要反向的传输数据。<li><strong>理想信道</strong>，即通信是没有错误的。<li><strong>发送方总有数据发送</strong>，并且<strong>接收方总能及时处理所收到的数据</strong>。</ul><h3 id="单工停-等协议-stop-and-wait"><span class="mr-2"><strong>单工停-等协议 (stop-and-wait)</strong></span><a href="#单工停-等协议-stop-and-wait" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>按照无限制的单工协议，<strong>如果接收方的处理速度不及发送方，则可能出现帧丢失的情况</strong>。因此就有了<strong>解决方法</strong>，<strong>增加流量控制 (Flow control) 机制</strong>，得到单工停-等协议。</p><blockquote><p>虽然这个协议考虑了接收方的处理速度，但其未考虑传输出错的问题。</p></blockquote><p><strong>接收方每收到一帧，都向发送方返回一个应答帧</strong>。而<strong>发送方每发送一帧，都等待来自接收方的应答帧</strong>，之后才发送下一帧。</p><h3 id="有噪声信道的单工协议"><span class="mr-2"><strong>有噪声信道的单工协议</strong></span><a href="#有噪声信道的单工协议" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>在有噪声信道中，帧在传输过程中是有可能出错的，此问题的解决方法为 ARQ 协议。</p><p><strong>ARQ 协议的原理要点</strong>有：</p><ul><li><strong>校验和</strong>，使接收方能够检测帧是否出错<li><strong>确认帧</strong>，使发送方知道帧已被正确接收<li><strong>超时重发</strong>，发送方在规定时间内未收到确认帧，则重发帧<li><strong>帧序号</strong>，保证接收方不会重复接收帧</ul><p>协议设计时，<strong>需要考虑的三种情形</strong>：</p><p><code class="language-plaintext highlighter-rouge">数据帧被正确接收</code></p><p>接收方<strong>返回确认帧</strong>，发送方收到后<strong>继续发送下一帧</strong>。</p><p><code class="language-plaintext highlighter-rouge">数据帧出错或丢失</code></p><p>接收方<strong>未收到帧或校验出错丢失该帧</strong>，发送方<strong>等待确认帧超时后，重新发送数据帧</strong>。</p><p><code class="language-plaintext highlighter-rouge">确认帧出错或丢失</code></p><p>发送方<strong>未收到有效的确认帧，重发数据帧</strong>。接收方<strong>收到后，检测到帧序号重复</strong>，不上交该帧，<strong>仅返回确认帧</strong>。</p><h2 id="滑动窗口协议"><span class="mr-2"><strong>滑动窗口协议</strong></span><a href="#滑动窗口协议" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>传输链路存在时延，<strong>ARQ 协议在同一时刻仅有一个帧在链路上传输，导致其对信道的利用率较低</strong>，特别是传输时延较长的时候。</p><p><img data-src="/assets/img/ComputerNetwork/CN-3/ARQ.png" alt="" style="border-radius: 5%" data-proofer-ignore></p><p>利用率 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi><mo>=</mo><msub><mi>T</mi><mi>D</mi></msub><mtext> </mtext><mi mathvariant="normal">/</mi><mtext> </mtext><mo stretchy="false">(</mo><msub><mi>T</mi><mi>D</mi></msub><mtext> </mtext><mo>+</mo><mtext> </mtext><mi>R</mi><mi>T</mi><mi>T</mi><mtext> </mtext><mo>+</mo><mtext> </mtext><msub><mi>T</mi><mi>A</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">U = T_D~/~(T_D~+~RTT~+~T_A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace nobreak"> </span><span class="mord">/</span><span class="mspace nobreak"> </span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace nobreak"> </span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace nobreak"> </span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace nobreak"> </span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mspace nobreak"> </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><blockquote><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>D</mi></msub></mrow><annotation encoding="application/x-tex">T_D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ：发送数据帧的时间，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">RTT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span></span></span></span> ：往返时延 / 环路时延，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>A</mi></msub></mrow><annotation encoding="application/x-tex">T_A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ：发送应答帧的时间</p></blockquote><h3 id="滑动窗口协议原理"><span class="mr-2"><strong>滑动窗口协议原理</strong></span><a href="#滑动窗口协议原理" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>滑动窗口协议的基本思想是<strong>允许发送方连续发送多个帧，并通过滑动窗口实现流量控制</strong>。</p><p><strong>发送方，发送窗内的序列号代表允许它发送的帧</strong>。窗口内最大的序列号成为<strong>窗口上边界、上沿或前沿</strong>。窗口内最小的序列号成为<strong>窗口下边界、下沿、后沿</strong>。每当从网络层得到一个数据包，将其组成帧发出后，<strong>发送窗口的上边界将 +1</strong>。发送窗口下边界的帧被接收方确认后，<strong>发送窗口的下边界将 +1</strong>。</p><p><strong>接收方，接收窗口内的序列号代表可以接受的帧</strong>。<strong>收到的帧序列号等于窗口下边界</strong>时，将该帧<strong>上交网络层</strong>，并<strong>返回确认帧</strong>，同时<strong>整个窗口向前移动 1 个位置</strong>。如果收到帧序列号落在接收窗口之外，则将其丢弃。</p><p><code class="language-plaintext highlighter-rouge">后退N帧的滑动窗口协议</code></p><p>当<strong>某帧出错时，该帧之后的帧全部被丢弃，从出错帧开始重新发送</strong>。</p><p><code class="language-plaintext highlighter-rouge">选择性重传的滑动窗口协议</code></p><p>当<strong>某帧出错时，只选择性重发该帧</strong>，该帧之后发送的帧会先由接收方在数据链路层缓冲，收到重发的出错帧之后再上交给网络层。</p><blockquote><p>ACKn 表示 n 及 n 之前的帧均已被正确接收</p></blockquote><p>当接收方<strong>检测到出错帧</strong>时，会发送一个<strong>否定的确认帧 (Negative Acknowledgement, NAK)</strong>。这样的好处是，<strong>发送方可以尽快重发出错帧，不必等到超时</strong>。</p><h2 id="点对点协议-ppp"><span class="mr-2"><strong>点对点协议 PPP</strong></span><a href="#点对点协议-ppp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>PPP 全称为 Point-to-Point Protocol，是一种数据链路层协议，<strong>广泛应用于点到点链路的数据传输</strong>。</p><h3 id="ppp-协议的特点"><span class="mr-2"><strong>PPP 协议的特点</strong></span><a href="#ppp-协议的特点" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>PPP 协议<strong>有三个组成部分</strong>，分别是：</p><ul><li><strong>将 IP 数据封装到串行链路的方法</strong><li>用来建立、配置和测试数据链路连接的<strong>链路控制协议 Link Control Protocol LCP</strong><li>一套<strong>网络控制协议 Network Control Protocol NCP</strong></ul><h3 id="ppp-的帧格式"><span class="mr-2"><strong>PPP 的帧格式</strong></span><a href="#ppp-的帧格式" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><code class="language-plaintext highlighter-rouge">零比特填充</code></p><p>属于<strong>同步传输，如 SONET / SDH</strong>。</p><p><strong>发送端</strong>：只要发现有 5 个连续 1，则立即填入一个 0。</p><p><strong>接收端</strong>：对帧中的比特流进行扫描，<strong>每当发现 5 个连续 1 时，就把这 5 个连续 1 后的一个 0 删除。</strong></p><p><code class="language-plaintext highlighter-rouge">字符填充</code></p><p>属于<strong>异步传输</strong>。</p><p><strong>发送端</strong>：</p><p>信息字段（载荷）中的<strong>每一个 0x7E 转换成 0x7D, 0x5E</strong>。</p><p>信息字段中的<strong>每一个 0x7D 转换成 0x7D, 0x5D</strong>。</p><p>信息字段中的<strong>每一个 ASCII 码控制字符（小于 0x20 的字符）前面都加入 0x7D</strong>，且编码改变。如 0x03 转换成 0x7D, 0x23。</p><p><strong>接收端</strong>：</p><p>在<strong>收到数据后进行与发送端字节填充相反的变换</strong>，即可正确恢复原来的信息。</p><h3 id="ppp-协议的工作状态"><span class="mr-2"><strong>PPP 协议的工作状态</strong></span><a href="#ppp-协议的工作状态" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>鉴别状态中，若<strong>鉴别成功，则进入网络层协议 (Network-Layer Protocol)</strong>。<strong>否则进入链路终止状态 (Link Terminate)</strong>。</p><p>PPP<strong>支持两种身份认证协议</strong>，即：</p><p><code class="language-plaintext highlighter-rouge">口令鉴别协议 PAP (Password Authentication Protocol)</code></p><p>若使用 PAP，则<strong>需要发起通信的一方发送身份标识符和口令</strong>。</p><p><code class="language-plaintext highlighter-rouge">口令握手界别协议 CHAP (Challenge-Handshake Authentication Protocol)</code></p><p>若需要<strong>更好的安全性</strong>，则使用更加复杂的 CHAP。</p><h2 id="介质访问控制-media-access-control-mac"><span class="mr-2"><strong>介质访问控制 (Media Access Control, MAC)</strong></span><a href="#介质访问控制-media-access-control-mac" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p><strong>广播信道可以进行一对多的通信</strong>，而<strong>局域网使用的就是广播信道</strong>。局域网是在 20 世纪 70 年代末发展起来的。局域网技术在计算机网络中占有非常重要的地位。</p><h3 id="局域网的数据链路层"><span class="mr-2"><strong>局域网的数据链路层</strong></span><a href="#局域网的数据链路层" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>局域网最主要的特点</strong>是，<strong>网络为一个单位所拥有，且地理范围和站点数目均有限</strong>。</p><p>其<strong>优点有</strong>：</p><ul><li><strong>具有广播功能</strong>，从一个站点可以很方便的访问全网。局域网上的主机<strong>可共享连接在局域网上的各种硬件和软件资源</strong>。<li><strong>便于系统的扩展和逐渐地演变</strong>，各设备的位置可灵活调整和改变。<li>提高了系统的<strong>可靠性、可用性和生存性</strong>。</ul><p><img data-src="/assets/img/ComputerNetwork/CN-3/NetworkType.png" alt="" style="border-radius: 5%" data-proofer-ignore></p><p>局域网可按拓扑进行分类，其中有<strong>星形网、环形网及总线网</strong>。</p><p>由于局域网通常使用广播信道，可能会有多个主机同时访问信道。共享信道要着重考虑的问题是<strong>如何使众多用户能够合理且方便地共享通信媒体资源</strong>，因此就有了<strong>介质访问控制技术</strong>。其中有两种方法：</p><p><code class="language-plaintext highlighter-rouge">静态划分信道</code></p><p>有如<strong>频分复用、时分复用、波分复用以及码分复用</strong>。用户只要<strong>分配到了信道，就不会与其他用户发生冲突</strong>。但这种划分信道的方法<strong>代价较高，不适用于局域网</strong>。</p><p><code class="language-plaintext highlighter-rouge">动态介质访问控制 / 多点访问</code></p><p>其特点是<strong>信道并非在用户通信时固定分配给用户</strong>，分为以下两类：</p><p><code class="language-plaintext highlighter-rouge">随机访问</code></p><p><strong>所有用户可随机发送信息</strong>。但如果有<strong>两个或更多的用户在同一时间发送信息，就会产生碰撞</strong>。因此，必须有解决碰撞的网络协议。<strong>经典的协议有</strong>：CSMA/CD、CSMA/CA等。</p><p><code class="language-plaintext highlighter-rouge">受控访问</code></p><p>用户<strong>不能随机发送信息，而必须服从一定的控制</strong>，局域网中使用较少。<strong>经典代表有</strong>：分散控制的令牌环局域网和集中控制的多点线路探询，或轮询。</p><h3 id="csmacd-协议"><span class="mr-2"><strong>CSMA/CD 协议</strong></span><a href="#csmacd-协议" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>全称为载波监听多点访问/碰撞检测 Carrier Sense Multiple Access with Collision Detection，是<strong>一种随机访问协议</strong>，也<strong>是以太网的核心</strong>，非常重要。</p><p><strong>其优点：</strong></p><ul><li><strong>网络负载较低</strong>时，<strong>效率高</strong>。<li>硬软件<strong>实现简单、灵活</strong>。</ul><p><strong>其缺点：</strong></p><ul><li><strong>网络负载较重</strong>时，<strong>碰撞发生的概率增大</strong>，网络效率较低。<li>由于<strong>存在多次冲突的可能</strong>，数据<strong>从发送方到接收方的时间没有保证</strong>，即<strong>实时性较差</strong>。</ul><p><code class="language-plaintext highlighter-rouge">载波监听</code></p><p><strong>发送前先听</strong>：结点在发送数据之前会先检测一下，总线上是否有其他结点正在发送数据。若有则暂时不发送数据，以免发生碰撞。</p><p><code class="language-plaintext highlighter-rouge">碰撞检测</code></p><p>由于<strong>线路的传播时延</strong>，单纯<strong>靠载波监听并不能完全避免碰撞</strong>。有<strong>发生碰撞时</strong>，两个或更多的<strong>信号在总线上相互叠加</strong>，会<strong>导致无法识别</strong>。</p><p><strong>边发送边听</strong>：结点边发送数据边检测信道上是否发生了碰撞。</p><p><code class="language-plaintext highlighter-rouge">碰撞强化</code></p><p><strong>发送方检测到碰撞</strong>后，立刻<strong>停止发送</strong>，并<strong>发送 32 或 48bit 的人为干扰信号 (jamming signal)</strong>，以便<strong>让所有用户都知道已经发生了碰撞</strong>。</p><p><code class="language-plaintext highlighter-rouge">碰撞退避</code></p><p><strong>碰撞后</strong>，结点将<strong>等待一段时间</strong>，再<strong>重新开始载波检测和发送操作</strong>。为了避免退避后再次碰撞，<strong>冲突各方的等待时间就应该各不相同</strong>。因此，以太网采用了<strong>截断二进制指数退避算法 (truncated binary exponential backoff)</strong>。</p><p><strong>截断二进制指数退避算法的特点</strong>有：</p><ul><li><strong>退避时间</strong>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo>=</mo><mn>2</mn><mi>τ</mi><mo>×</mo></mrow><annotation encoding="application/x-tex">T=2\tau \times </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span><span class="mord">×</span></span></span></span>倍数<li><strong>倍数</strong>：在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msup><mn>2</mn><mi>k</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0,1,\dots,2^k - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.043548em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 中取随机数，其中 k = min(重传次数, 10)。<li><strong>重传次数超过 16 后，则丢弃该帧，并向上层报告。</strong></ul><p><code class="language-plaintext highlighter-rouge">争用期</code></p><p>一个站点开始发送数据后，<strong>最多经过时间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span>，就可以知道是否发生了碰撞</strong>。如果<strong>经过争用期还没检测到碰撞</strong>，就可以<strong>肯定这次发送不会发生碰撞</strong>。</p><p><code class="language-plaintext highlighter-rouge">以太网争用期</code></p><p><strong>以太网的端到端往返时延 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span></strong> 称为争用期，或碰撞窗口。其<strong>争用期长度为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>51.2</mn><mtext> </mtext><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">51.2~\mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">5</span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mspace nobreak"> </span><span class="mord mathdefault">μ</span><span class="mord mathdefault">s</span></span></span></span></strong>。</p><p>对于 10Mb/s 以太网，在争用期内可发送 512 bit，即 64 字节。因此在发送数据时，若前 64 字节未发生碰撞，就不会发生碰撞。根据此规定，<strong>以太网帧长 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≥</mo></mrow><annotation encoding="application/x-tex">\ge</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">≥</span></span></span></span> 64 字节，长度小于 64 字节的帧为无效帧</strong>。</p><h3 id="局域网技术标准"><span class="mr-2"><strong>局域网技术标准</strong></span><a href="#局域网技术标准" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>IEEE802 标准将<strong>局域网的数据链路层分为两个子层</strong>，分别是：</p><p><code class="language-plaintext highlighter-rouge">逻辑链路控制子层 (Logic Link Control, LLC)</code></p><p>逻辑链路控制子层，<strong>是局域网中数据链路层的上层部分</strong>，用户的<strong>数据链路服务透过 LLC 子层为网络层提供统一的接口</strong>。在 LLC 子层下面是 MAC 子层。</p><p><code class="language-plaintext highlighter-rouge">介质访问控制子层 (Media Access Control, MAC)</code></p><p>介质访问控制子层，<strong>是局域网中数据链路层的下层部分</strong>，<strong>提供定址及媒体存取的控制方式</strong>，使得<strong>不同设备或网络上的结点可以在多点的网络上通讯</strong>，而不会互相冲突。</p><h2 id="以太网"><span class="mr-2"><strong>以太网</strong></span><a href="#以太网" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>IEEE802 委员会的 802.3 工作组于 <strong>1983 年制定了第一个 IEEE 的以太网标准 IEEE802.3</strong>，数据率为 10Mb/s。DIX Ethernet V2 与 IEEE802.3 标准只有很小的差别，因此有很多人常把 802.3 局域网简称为以太网。但严格来说，<strong>以太网应该是指符合 DIX Ethernet V2 标准的局域网</strong>。</p><h3 id="曼彻斯特-manchester-编号"><span class="mr-2"><strong>曼彻斯特 (Manchester) 编号</strong></span><a href="#曼彻斯特-manchester-编号" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>二进制基带数字信号通常是高、低电压交替出现的信号</strong>。当信号出现一长串连续的 0 或 1 时，接收端就无法从收到的比特流中取位同步信号。</p><p><img data-src="/assets/img/ComputerNetwork/CN-3/Manchester.png" alt="" style="border-radius: 5%" data-proofer-ignore></p><p><strong>曼彻斯特编码</strong>的编码方法就是<strong>把每一个码元分成两个相等的间隔，码元 1 是前一个间隔为低电压而后一个间隔为高电压。码元 0 则正好相反，从高电压转为低电压</strong>。这样保证每个比特的正中间都出现一次电压转换，接收端就可以利用这种电压的转换把位同步信号提取出来。</p><h3 id="以太网物理层"><span class="mr-2"><strong>以太网物理层</strong></span><a href="#以太网物理层" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>最初的以太网为总线结构，采用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>50</mn><mi mathvariant="normal">Ω</mi></mrow><annotation encoding="application/x-tex">50\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">0</span><span class="mord">Ω</span></span></span></span> 同轴电缆，传输速率为 10Mbps。</strong></p><p><strong>其缺点</strong>是：</p><ul><li>同轴电缆成本较高<li>总线上单点故障会导致全网瘫痪。网络中结点数较多时，可靠性较差，且维护困难。</ul><p>后来发展为<strong>采用更便宜和灵活的非屏蔽双绞线，使用集线器 (HUB) 连接各个结点，物理上呈星形结构</strong>。集线器就很像一个多接口的转发器，工作在物理层。<strong>使用集线器的以太网在逻辑上仍然是一个总线网</strong>。这种技术称为 10BASE-T。</p><blockquote><p>10：10Mbps，BASE：基带传输，T：双绞线 (Twisted pair)</p></blockquote><h3 id="以太网的-mac-层"><span class="mr-2"><strong>以太网的 MAC 层</strong></span><a href="#以太网的-mac-层" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>以太网采用 CSMA/CD 介质访问控制协议</strong>。所有的结点都会被分配一个按照 IEEE802.3 标准，且唯一的 MAC 地址。该地址为 48bit，高 24bit 为厂商标识符，低 24bit 由厂商自行分配，且<strong>必须保证每个网络接口具有全球唯一的 MAC 地址</strong>。</p><p>当一个结点发送数据时，由于以太网的总线结构，总线上的所有结点都能收到帧。因此就需要一个适配器 (Adapter) 在每收到一个帧的时，<strong>就检查帧中的目的 MAC 地址</strong>。<strong>如果是发往本站的帧则进行处理，否则丢弃</strong>。</p><p>发往本站的帧包括以下三种帧：</p><p><code class="language-plaintext highlighter-rouge">单播帧 / 一对一 (Unicast)</code></p><p><code class="language-plaintext highlighter-rouge">广播帧 / 一对全体 (Broadcast)</code> — MAC 地址为全 1 就表示广播</p><p><code class="language-plaintext highlighter-rouge">组播 / 多播 / 一对多 (Multicast)</code></p><h3 id="以太网的帧格式5个字段"><span class="mr-2"><strong>以太网的帧格式（5个字段）</strong></span><a href="#以太网的帧格式5个字段" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>每个帧在发送时，前面都会插入 8 个字节</strong>。其中<strong>前 7 个字节用于比特同步，后 1 字节为帧起始标志</strong>。由于以太网采用曼彻斯特编码，每个比特均有电平跳变，因此<strong>无电平跳变就表示总线空闲</strong>。</p><p><code class="language-plaintext highlighter-rouge">目的地址</code></p><p><strong>6 字节</strong>，接收方的 MAC 地址。</p><p><code class="language-plaintext highlighter-rouge">源地址</code></p><p><strong>6 字节</strong>，发送方的 MAC 地址。</p><p><code class="language-plaintext highlighter-rouge">类型</code></p><p><strong>2 字节</strong>，标明上层协议类型，例如 0x0800 表示 IP 包。</p><p><code class="language-plaintext highlighter-rouge">数据</code></p><p><strong>网络层数据报</strong>，长度为 46 ~ 1500 字节。最小为 46 字节是由以太网有效帧的最小长度 64 字节，扣除目的地址、源地址、类型及 FCS 计算出来的，即 64 - 6 - 6 - 2 - 4 = 46 字节。</p><p><code class="language-plaintext highlighter-rouge">帧校验序列 (Frame Checksum, FCS)</code></p><p><strong>4 字节</strong>，帧校验序列，采用 CRC 校验。</p><h3 id="快速以太网-faster-ethernet"><span class="mr-2"><strong>快速以太网 (Faster Ethernet)</strong></span><a href="#快速以太网-faster-ethernet" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>其<strong>标准为 IEEE802.3u，传输速率为 100Mb/s</strong>，其<strong>使用 8 芯非屏蔽双绞线中的 4 条芯，其中 2 条用以发送，2 条用以接收</strong>。这使其可在全双工方式下工作而无冲突发生，因此 CSMA/CD 协议对全双工方式工作的快速以太网就不起作用了。</p><p>其使用的 MAC 帧格式<strong>仍然是 IEEE802.3 标准规定的帧格式</strong>，<strong>最短的帧长也保持不变</strong>。由于<strong>传输速率有所提升，争用期有所缩短，导致一个网段的最大电缆长度减小至 100m</strong>。</p><p><strong>快速以太网的物理层标准</strong>有：</p><p><code class="language-plaintext highlighter-rouge">100BASE-TX</code></p><p>使用媒体为<strong>铜缆</strong>，网段的<strong>最大电缆长度为 100m</strong>，特点是<strong>使用 2 对 UTP 5 类线或屏蔽双绞线 STP</strong>。</p><p><code class="language-plaintext highlighter-rouge">100BASE-T4</code></p><p>使用媒体为<strong>铜缆</strong>，网段的<strong>最大电缆长度为 100m</strong>，特点是<strong>使用 4 对 UTP 3 类线或 5 类线</strong>。</p><p><code class="language-plaintext highlighter-rouge">100BASE-FX</code></p><p>使用媒体为<strong>光缆</strong>，网段的<strong>最大电缆长度为 2000m</strong>，特点是<strong>两根光纤，发送与接收个一根</strong>。</p><h3 id="千兆以太网--吉比特以太网-gigabit-ethernet"><span class="mr-2"><strong>千兆以太网 / 吉比特以太网 (Gigabit Ethernet)</strong></span><a href="#千兆以太网--吉比特以太网-gigabit-ethernet" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>其<strong>标准为 IEEE802.3z，传输速率为 1Gb/s</strong>，其迅速占领市场，成为<strong>以太网的主流产品</strong>。</p><p>吉比特以太网的标准 IEEE802.3z 有以下几个特点：</p><ul><li>允许在 1Gb/s 下<strong>以全双工和半双工两种方式工作</strong>。<li>仍<strong>使用 IEEE802.3 协议规定的帧格式</strong>。<li>在<strong>半双工方式下使用 CSMA/CD 协议，全双工方式则不使用</strong>。<li>支持自适应，与 10BASE-T 和 100BASE-T 技术向后兼容。</ul><p>吉比特以太网的物理层标准有：</p><p><code class="language-plaintext highlighter-rouge">1000BASE-SX</code></p><p>使用媒体为<strong>光缆</strong>，网段的<strong>最大电缆长度为 550m</strong>，特点是<strong>采用多摸光纤</strong>。</p><p><code class="language-plaintext highlighter-rouge">1000BASE-LX</code></p><p>使用媒体为<strong>光缆</strong>，网段的<strong>最大电缆长度为 5000m</strong>，特点是<strong>采用单模光纤及多摸光纤</strong>。</p><p><code class="language-plaintext highlighter-rouge">1000BASE-CX</code></p><p>使用媒体为<strong>铜缆</strong>，网段的<strong>最大电缆长度为 25m</strong>，特点是<strong>使用 2 对屏蔽双绞线电缆 STP</strong>。</p><p><code class="language-plaintext highlighter-rouge">1000BASE-T</code></p><p>使用媒体为<strong>铜缆</strong>，网段的<strong>最大电缆长度为 100m</strong>，特点是<strong>使用 4 对 UTP 5 类线</strong>。</p><h3 id="万兆以太网--10-吉比特以太网-10gbps-ethernet"><span class="mr-2"><strong>万兆以太网 / 10 吉比特以太网 (10Gbps Ethernet)</strong></span><a href="#万兆以太网--10-吉比特以太网-10gbps-ethernet" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>其<strong>标准为 IEEE802.3ae，传输速率为 10Gb/s，只使用光纤传输</strong>。</p><p>其使用的 MAC 帧格式仍然是 IEEE802.3 标准规定的帧格式，并保留了 802.3 标准规定的以太网最小帧长与最大帧长。由于万兆以太网<strong>仅工作在全双工方式，不存在争用问题，也就不使用 CSMA/CD 协议</strong>。因此其传输距离大大提高，不再受限于争用期。</p><h2 id="局域网互连"><span class="mr-2"><strong>局域网互连</strong></span><a href="#局域网互连" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><h3 id="在物理层扩展局域网"><span class="mr-2"><strong>在物理层扩展局域网</strong></span><a href="#在物理层扩展局域网" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>使用<strong>中继器 (repeater) 或集线器 (HUB)</strong>，可实现<strong>局域网在物理层的互连</strong>。</p><p>中继器和集线器都<strong>工作在网络的物理层</strong>。</p><p><strong>其优点是</strong>，可以<strong>方便地实现网络的扩展</strong>，并且<strong>成本较低</strong>。</p><p><strong>而缺点则是</strong>，<strong>碰撞域增大，碰撞发生概率增大</strong>，可能会<strong>影响网络性能</strong>。</p><h3 id="在数据链路层扩展局域网"><span class="mr-2"><strong>在数据链路层扩展局域网</strong></span><a href="#在数据链路层扩展局域网" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>使用<strong>网桥 (bridge)</strong> ，可实现<strong>局域网在数据链路层的互连</strong>。</p><p>网桥<strong>工作在网路的数据链路层</strong>。</p><p>网桥的基本工作原理是<strong>根据 MAC 帧的目的地址对收到的帧进行转发</strong>，即其具有过滤帧的功能。当收到一个帧时，会先检查帧的目的 MAC 地址，确定将该帧转发到哪一个接口，而非向所有的接口转发。</p><p><strong>转发表</strong>是由交换机根据自学习算法建立的。</p><p><strong>其优点是</strong>，可<strong>过滤通信量、增大吞吐量，因为各网段都是独立的碰撞域</strong>。同时，其<strong>扩大了物理范围</strong>，可互连不同物理层、不同 MAC 子层和不同速率的局域网，<strong>提高了可靠性</strong>。</p><p><strong>其缺点是</strong>，其<strong>存储转发的方式增加了时延</strong>，并且<strong>在 MAC 子层并没有流量控制功能</strong>。因此网桥<strong>只适用于用户数不太多和通信量不太大的局域网</strong>，因为若某个站点频繁发送广播帧（MAC 地址全为 1 的帧）时，就会产生网络拥塞，即广播风暴。</p><p><code class="language-plaintext highlighter-rouge">多接口网桥 — 交换机 Switch</code></p><p>早期称为交换式集线器 (switching hub)，通常<strong>有十几道几十个网络接口</strong>，每个接口可连接主机或其他交换机。其<strong>内部工作原理为网桥，每一个网络接口被视为一个网段</strong>，因此交换机是一个多接口网桥。其<strong>按照自学习算法建立转发表</strong>，原理是若从 A 出发的帧从接口 x 进入到某网桥，则从这个接口出发沿相反方向一定可以把一个帧传送到 A。</p><p>由于每一个网络接口被视为一个网段，并且<strong>每个接口都独享宽带，因此可以大幅提高网络性能</strong>。集线器则由所有接口共享传输介质的带宽。</p><p><code class="language-plaintext highlighter-rouge">交换机的自学习过程</code></p><p>交换机<strong>初始时转发表为空</strong>，通过<strong>自学习逐步建立</strong>。</p><p>交换机在<strong>收到一个帧后</strong>，会先进行自学习，<strong>检查帧中源地址在交换表中是否存在</strong>。若<strong>不存在，则在交换表中添加一项，记录源地址和进入交换机的接口</strong>。</p><p>然后<strong>转发帧，根据收到的帧中的目的地址在交换表中查找</strong>。若<strong>找到，则对应的接口为转发接口</strong>。若<strong>找不到，则向除进入接口外的所有接口转发，再根据目的地址返回的应答帧进行相应记录</strong>。</p><p><code class="language-plaintext highlighter-rouge">透明网桥还使用生成树算法 (spanning tree)</code></p><p><strong>其用途是</strong>，当多个局域网互连形成环路时，<strong>避免帧无休止转发</strong>。所使用的方法为<strong>建立生成树</strong>，即互连在一起的网桥彼此通信后，能找出网络拓扑的一个子集。在该子集中，整个连通的网络不存在回路，即在<strong>任何两个站之间只有一条路径</strong>。</p><p>但<strong>考虑到网络拓扑的动态变化，生成树必须定期更新</strong>。</p><h2 id="虚拟局域网-virtual-lan"><span class="mr-2"><strong>虚拟局域网 Virtual LAN</strong></span><a href="#虚拟局域网-virtual-lan" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><hr /><p>虚拟局域网，是<strong>在现有局域网的基础上，通过将网络站点分组，构成若干个逻辑上独立的虚拟局域网</strong>。<strong>其用途是</strong>，便于管理、控制广播风暴以及安全性等。</p><p><strong>帧不会在两个虚拟局域网之间自动转发，包括广播帧</strong>。这样，虚拟局域网限制了接收广播信息的计算机数，使得<strong>网络不会因为传播过多的广播信息而引起性能恶化</strong>。</p><p>IEEE 批准了 <strong>802.3ac 标准，定义了以太网的帧格式的扩展，以便支持虚拟局域网</strong>。虚拟局域网允许在以太网的帧格式中插入一个 4 字节的标识符，称为 VLAN 标记 (tag)，用来指明发送该帧的计算机术语哪一个虚拟局域网。而<strong>插入 VLAN 标记得出的帧，就称为 802.1Q 帧</strong>。</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/notes/'>Notes</a>, <a href='/categories/computer-network/'>Computer Network</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/computer-network/" class="post-tag no-text-decoration" >Computer Network</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82+Data+Link+Layer+-+Jeremy%27s+Blog&url=https%3A%2F%2Fjeremyytann.github.io%2Fposts%2F%25E6%2595%25B0%25E6%258D%25AE%25E9%2593%25BE%25E8%25B7%25AF%25E5%25B1%2582-Data-Link-Layer%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82+Data+Link+Layer+-+Jeremy%27s+Blog&u=https%3A%2F%2Fjeremyytann.github.io%2Fposts%2F%25E6%2595%25B0%25E6%258D%25AE%25E9%2593%25BE%25E8%25B7%25AF%25E5%25B1%2582-Data-Link-Layer%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fjeremyytann.github.io%2Fposts%2F%25E6%2595%25B0%25E6%258D%25AE%25E9%2593%25BE%25E8%25B7%25AF%25E5%25B1%2582-Data-Link-Layer%2F&text=%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82+Data+Link+Layer+-+Jeremy%27s+Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Advanced-Dart/">Advanced Dart</a><li><a href="/posts/Basics-Of-Dart/">Basics of Dart</a><li><a href="/posts/UML-Class-Diagram/">UML Class Diagram</a><li><a href="/posts/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F-Selection-Sort/">选择排序 Selection Sort</a><li><a href="/posts/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F-Merge-Sort/">归并排序 Merge Sort</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/blender/">Blender</a> <a class="post-tag" href="/tags/computer-network/">Computer Network</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/sorting/">Sorting</a> <a class="post-tag" href="/tags/object-oriented-programming/">Object-Oriented Programming</a> <a class="post-tag" href="/tags/dart/">Dart</a> <a class="post-tag" href="/tags/mvc/">MVC</a> <a class="post-tag" href="/tags/operating-system/">Operating System</a> <a class="post-tag" href="/tags/software-architecture/">Software Architecture</a> <a class="post-tag" href="/tags/uml/">UML</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/"><div class="card-body"> <em class="small" data-ts="1646203860" data-df="ll" > Mar 2, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>计算机网络概述</h3><div class="text-muted small"><p> 计算机网络的定义 计算机网络是一些互相连接的、自治（一个计算机网络连接多台计算机，但各自独立工作）的计算机的集合。其功能主要体现在连通性、资源共享。 计算机网络与分布式系统 分布式系统是建立在网络之上的软件系统。在分布式系统中，一组独立的计算机协同完成一个工作，展现给用户的是一个统一的整体，就像一个系统一样。而计算机网络则没有这种统一性。 计算机网络的分类 计算机网络的...</p></div></div></a></div><div class="card"> <a href="/posts/%E7%89%A9%E7%90%86%E5%B1%82-Physical-Layer/"><div class="card-body"> <em class="small" data-ts="1646456460" data-df="ll" > Mar 5, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>物理层 Physical Layer</h3><div class="text-muted small"><p> 物理层的基本概念 物理层主要任务为确定与传输媒体的接口有关的一些特性，像是： 机械特性 — 接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置等 电气特性 — 接口电缆的各条线上出现的电压的范围 功能特性 — 某条线上出现的某一电平的电压的意义 过程特性 — 对于不同功能的各种可能事件的出现顺序 数据通信的基础知识 信道 (Channel) 一般表示向某一方向传...</p></div></div></a></div><div class="card"> <a href="/posts/%E7%BD%91%E7%BB%9C%E5%B1%82-Network-Layer/"><div class="card-body"> <em class="small" data-ts="1648197360" data-df="ll" > Mar 25, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>网络层 Network Layer</h3><div class="text-muted small"><p> 网络层提供的两种服务 网络层应该向运输层提供这样的服务，曾引起了长期的争论。 争论焦点的实质是：数据的可靠传输应该由网络还是端系统来负责？ 面向连接 面向连接的服务，即虚电路 (virtual circuit)。虚电路只是一种逻辑连接，分组沿着这条逻辑连接按照存储转发方式传送，而非真正建立一条物理连接。在两台计算机进行通信时，先由网络建立连接，之后的数据均通过该连接进行，由网络保...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%E7%89%A9%E7%90%86%E5%B1%82-Physical-Layer/" class="btn btn-outline-primary" prompt="Older"><p>物理层 Physical Layer</p></a> <a href="/posts/%E7%BD%91%E7%BB%9C%E5%B1%82-Network-Layer/" class="btn btn-outline-primary" prompt="Newer"><p>网络层 Network Layer</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "jeremyytann/jeremyytann.github.io", "data-repo-id": "R_kgDOG65--w", "data-category": "General", "data-category-id": "DIC_kwDOG65--84CN6so", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/tanchiachun">Tan Chia Chun</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/blender/">Blender</a> <a class="post-tag" href="/tags/computer-network/">Computer Network</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/sorting/">Sorting</a> <a class="post-tag" href="/tags/object-oriented-programming/">Object-Oriented Programming</a> <a class="post-tag" href="/tags/dart/">Dart</a> <a class="post-tag" href="/tags/mvc/">MVC</a> <a class="post-tag" href="/tags/operating-system/">Operating System</a> <a class="post-tag" href="/tags/software-architecture/">Software Architecture</a> <a class="post-tag" href="/tags/uml/">UML</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-7W4M2E46LD"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-7W4M2E46LD'); }); </script>
